<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Урок</title>
  <link rel="stylesheet" href="style.css" />
  <script src="telegram.js"></script>
</head>
<body>
  <div class="container">
<!-- Кнопка Назад -->
<button class="glass-button" onclick="window.location.href='index.html'">Назад к урокам</button>

<h2 id="lessonTitle">Загрузка...</h2>

<!-- Видео -->
<iframe
  id="videoPlayer"
  width="100%"
  height="360"
  allow="autoplay"
  frameborder="0"
  allowfullscreen
  style="border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
</iframe>

<h3 style="margin-top: 24px;">Материалы:</h3>
<ul id="filesList"></ul>

  </div>

  <script src="app.js"></script>
  <script>
    const id = parseInt(new URLSearchParams(window.location.search).get('id'), 10);

    async function fetchLessonData(id) {
      const data = await fetch('data.json').then(r => r.json());
      return data.find(l => l.id === id);
    }

    fetchLessonData(id).then(lesson => {
      if (!lesson) {
        document.body.innerHTML = '<p style="padding:20px;">Урок не найден.</p>';
        return;
      }

      document.getElementById('lessonTitle').innerText = lesson.title;
      document.getElementById('videoPlayer').src = lesson.video;

      const fl = document.getElementById('filesList');
      lesson.files.forEach(f => {
        const li = document.createElement('li');
        li.innerHTML = `<a href="${f.url}" target="_blank">${f.name}</a>`;
        fl.appendChild(li);
      });
    }).catch(err => {
      console.error(err);
      document.body.innerHTML = '<p style="padding:20px;">Ошибка загрузки данных.</p>';
    });
  </script>
</body>
</html>
